<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('../partials/head.ejs') %>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Games RODO</title>
</head>

<body>
    <header>
        <%- include('../partials/header.ejs') %>

    </header>
    <!-------------------------------------------------------------------------- -->
    <main>
        <input type="hidden" id="idCart" value='<%- cart.id %>'>
        <div class="jumbotron p-0 pb-2">
            <h1 class="text-center py-4">Carrito</h1>
            <ul class="list-group" id="productosCarrito">
                <% for(var i=0; i<cart.productos.length; i++) {%>
                    <li class="list-group-item">
                        <div class="row" style="text-align: center">
                            <div class="col">
                                <img style="border-radius: 8%; width: 28%; height: 5em; border: solid 1px" src=<%= cart.productos[i].foto %>>
                            </div>
                            <div class="col text-left">
                                <div class="col"><b>Nombre:</b> <%=cart.productos[i].nombre %></div>
                                <div class="col"><b>Precio:</b> <%=cart.productos[i].precio %></div>
                                <div class="col"><b>Fecha:</b> <%=cart.productos[i].timestamp %></div>
                            </div>
                            <div class="col text-left">
                                <div class="col py-4"><b>Cantidad:</b> <%=cart.productos[i].cantidad %></div>
                            </div>
                            <div class="col text-center">
                                <a><i onclick="borrarProductoCarrito('<%=cart.id%>', '<%=cart.productos[i]._id%>')" class="bi bi-trash btn btn-danger"></i></a>
                            </div>
                        </div>
                    </li>
                <% } %>
            </ul>

            <% if(!cart.productos.length) { %>
                <h3 class="text-center py-5" id="carritoVacio"> - No se han agregado productos al carrito- </h3>
            <% } else{ %>  
                <div class="d-flex justify-content-between col-11 mx-auto">
                    <button onclick="vaciarCarrito('<%=cart.id%>')" class="btn btn-outline-danger d-grid gap-2 col-2 mx-auto my-5"> Vaciar Carrito </button>
                    <button onclick="finalizarCarrito('<%=cart.id%>')" class="btn btn-outline-success d-grid gap-2 col-2 mx-auto my-5"> Finalizar Compra </button>
                </div>
            <% } %>
        </div>
        <!-------------------------------------------------------------------------- -->
        </div>
        <div class="d-flex justify-content-around fs-1 m-4">
            <i class="bi bi-xbox"></i>
            <i class="bi bi-playstation"></i>
            <i class="bi bi-nintendo-switch"></i>
        </div>
    </main>

    <footer>
        <%- include('../partials/footer'); %>
    </footer>
    <script src="/js/index.js"></script>
    <script src="/js/carrito.js"></script>
</body>

</html>